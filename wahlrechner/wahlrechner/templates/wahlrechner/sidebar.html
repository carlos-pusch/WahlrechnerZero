{% comment %}
Template für die Seitenleiste mit der Übersicht aller Thesen.
{% endcomment %}

{% load wahlrechner_extras %}

<div class="mobile-menu-container md:hidden">
    {# Burger-Icon für mobile Ansicht #}
    <div id="burgerButton" class="burger-button">
        <!-- <span class="burger-icon"></span>
        <span class="burger-icon"></span>
        <span class="burger-icon"></span> -->
        <!-- lz_a_1: Kreis-Button ohne Text -->
        <button class="btn btn-burger" id="burger-button">
            {% include "snippets/icon.html" with icon="burger" color="black" %} 
        </button>
    </div>
</div>

<div id="thesenMenu" class="thesen-container">
    <p class="mb-2 text-lg font-semibold dark:text-gray-200">Alle Thesen</p>

    <ul class="space-y-1 sidebar">

        {# Zeige Meldung, falls noch keine Thesen hinzugefügt#}
        {% if not thesen.first %}

            <p class="mt-4 italic text-gray-700 dark:text-gray-300">
                Es wurden noch keine Thesen hinzugefügt. Bitte melde dich in der
                <a class="underline" href="{% url 'admin:index' %}">Admin-Oberfläche</a> an, um neue Thesen
                hinzuzufügen.</p>

        {% else %}

            {% for these in thesen %}

                {# Erhalte Position des Nutzers zu der These #}
                {% alias opinions|get_opinion:these as opinion %}

                <li>

                    {% include "snippets/icon.html" with icon=opinion|default:icon_default %}

                    {% if these == these_current %}
                        <a class="active">{{ these.these_keyword }}</a>
                    {% else %}
                        <a {% if url_template != "" %}
                            onClick="location.href='{% url url_template these.pk zustand_current %}'"
                            class="clickable"
                        {% endif %} >
                            {{ these.these_keyword }}
                        </a>
                    {% endif %}

                    {# Falls These priorisiert, füge Icon hinzu #}
                    {% if opinions|is_prio:these %}
                        {% include "snippets/icon.html" with icon="fav" %}
                    {% endif %}

                </li>

            {% endfor %}

        {% endif %}

    </ul>
</div>

<script>
    // Burger-Menü Interaktion
    document.addEventListener('DOMContentLoaded', function() {
        const burgerButton = document.getElementById('burgerButton');
        const thesenMenu = document.getElementById('thesenMenu');
        
        if (burgerButton && thesenMenu) {
            burgerButton.addEventListener('click', function() {
                thesenMenu.classList.toggle('active');
            });
            
            // Schließe Menü bei Klick auf einen Link
            const links = thesenMenu.querySelectorAll('a.clickable');
            links.forEach(link => {
                link.addEventListener('click', function() {
                    thesenMenu.classList.remove('active');
                });
            });
        }
    });
</script>